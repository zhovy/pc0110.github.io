



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="Hexo" href="https://zhovy.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="Hexo" href="https://zhovy.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="Hexo" href="https://zhovy.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="Mysql,database" />


<link rel="canonical" href="https://zhovy.github.io/passages/Mysql/">



  <title>
Mysql |
🐯 = Hexo = subtitle</title>
<meta name="generator" content="Hexo 6.2.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Mysql
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2019-11-03 19:30:31">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2019-11-03T19:30:31+08:00">2019-11-03</time>
  </span>
  <span class="item" title="本文字数">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">本文字数</span>
    <span>9.6k</span>
    <span class="text">字</span>
  </span>
  <span class="item" title="阅读时长">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">阅读时长</span>
    <span>9 分钟</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">🐯</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giciszlczyj20zk0m816d.jpg"></li>
          <li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gipet8c1a2j20zk0m8kct.jpg"></li>
          <li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gicit31ffoj20zk0m8naf.jpg"></li>
          <li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giclxp31goj20zk0m8qv5.jpg"></li>
          <li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gicli3sbvtj20zk0m8x6p.jpg"></li>
          <li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gipey84bjtj20zk0m8hdt.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://zhovy.github.io/passages/Mysql/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/panda.jpg">
    <meta itemprop="name" content="Zhouy">
    <meta itemprop="description" content="subtitle, What's the point of living?">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="存储引擎innodb-myisammemoryblackhole"><a class="markdownIt-Anchor" href="#存储引擎innodb-myisammemoryblackhole">#</a> 存储引擎：Innodb myisam,memory,blackhole</h1>
<p>MySQL 中的数据用各种不同的技术存储在文件（或者内存）中。这些技术中的每一种技术都使用不同的存储机制、索引技巧、锁定水平并且最终提供不同的功能和能力。<br>
通过选择不同的技术，你能够获得额外的速度或者功能，从而改善你的应用的整体功能。</p>
<p><strong>MyISAM</strong>：拥有较高插入，查询速度，但不支持事务，不支持外键。<br>
<strong>InnoDB</strong>：支持事务，支持外键，支持行级锁定，性能较低。<br>
<strong>black hole</strong>: 创建立马删除<br>
<strong> memory</strong>：只存在于内存中</p>
<h1 id="创建表的完整性约束"><a class="markdownIt-Anchor" href="#创建表的完整性约束">#</a> 创建表的完整性约束</h1>
<p>create  table 表名 (<br>
字段名 1 类型 [(宽度) 约束条件],<br>
 字段名 2 类型 [(宽度) 约束条件],<br>
 字段名 3 类型 [(宽度) 约束条件]<br>
);</p>
<p>注意：字段名和字段类型是必须的，最后一个字段不能加逗号</p>
<p>宽度：char 只能存一个字符</p>
<p>alter table 表名 modify 字段名 字段类型 约束条件<br>
 // 自增条件<br>
 auto_increment</p>
<h1 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型">#</a> 数据类型</h1>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>数值类型<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>smallint  <span class="token number">2</span>字节</pre></td></tr><tr><td data-num="3"></td><td><pre>int       <span class="token number">4</span>字节</pre></td></tr><tr><td data-num="4"></td><td><pre>bigint    <span class="token number">8</span>字节   </pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>float     <span class="token number">4</span>字节</pre></td></tr><tr><td data-num="7"></td><td><pre>double    <span class="token number">8</span>字节</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token operator">&lt;</span>日期和时间类型<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">date</span>      <span class="token number">3</span>字节</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">time</span>      <span class="token number">3</span>字节</pre></td></tr><tr><td data-num="12"></td><td><pre>year      <span class="token number">1</span>字节</pre></td></tr><tr><td data-num="13"></td><td><pre>datetime  <span class="token number">8</span>字节</pre></td></tr><tr><td data-num="14"></td><td><pre>timestamp <span class="token number">4</span>字节</pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">&lt;</span>字符串类型<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>char    <span class="token number">0</span>-255</pre></td></tr><tr><td data-num="18"></td><td><pre>varchar <span class="token number">0</span>-65535</pre></td></tr><tr><td data-num="19"></td><td><pre>text    <span class="token number">0</span>-65535</pre></td></tr></table></figure><h1 id="查询版本"><a class="markdownIt-Anchor" href="#查询版本">#</a> 查询版本</h1>
<p>select version();</p>
<h1 id="别名"><a class="markdownIt-Anchor" href="#别名">#</a> 别名</h1>
<p>select 100<em>23 as 别名；<br>
select 100</em>23 别名；</p>
<h1 id="distinct-去重"><a class="markdownIt-Anchor" href="#distinct-去重">#</a> distinct 去重</h1>
<p>select distinct 字段名 from 表名；</p>
<h1 id="unsigned"><a class="markdownIt-Anchor" href="#unsigned">#</a> unsigned</h1>
<h1 id="concat"><a class="markdownIt-Anchor" href="#concat">#</a> concat</h1>
<p>select ‘qwe’+123; 结果是 123 不能拼接字符串<br>
 select null+123; 结果是 null 任何值和 NULL 都是 null<br>
select concat (字段名。字段名) as 别名 from 表名；</p>
<h1 id="ifnull字段名返回值"><a class="markdownIt-Anchor" href="#ifnull字段名返回值">#</a> ifnull (字段名，返回值)</h1>
<p>当使用拼接语句时，因为存在可能有的属性为空的情况下<br>
 select concat (ifnull (saddress,0),sname) as out_put from student;</p>
<h1 id="模糊查询like-只是通配符-不能正则"><a class="markdownIt-Anchor" href="#模糊查询like-只是通配符-不能正则">#</a> 模糊查询 Like 只是通配符 不能正则</h1>
<p>通配符：% 匹配任意字符 _匹配单个字符<br>
查询第名字第二位为 a 和第四位为 s 的人的名字<br>
 select * from student where sname like ‘<em>a_s’;<br>
escape// 转义<br>
 select * from student where sname like '</em>_' escape '’; // 通过指定转义字符</p>
<h1 id="正则表达式-rlike-可以是正则表达式-需要"><a class="markdownIt-Anchor" href="#正则表达式-rlike-可以是正则表达式-需要">#</a> 正则表达式 rlike 可以是正则表达式 需要</h1>
<p>查找 name 字段中以’st’为开头的所有数据：<br>
mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘^st’;</p>
<p>查找 name 字段中以’ok’为结尾的所有数据：<br>
mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘ok$’;</p>
<p>查找 name 字段中包含’mar’字符串的所有数据：<br>
mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘mar’;</p>
<p>查找 name 字段中以元音字符开头或以’ok’字符串结尾的所有数据：<br>
mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP ‘<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>|ok$’;</p>
<h1 id="between-and-包含临界值"><a class="markdownIt-Anchor" href="#between-and-包含临界值">#</a> between and 包含临界值</h1>
<p>select * from student where sno between 100 and 120;</p>
<h1 id="in"><a class="markdownIt-Anchor" href="#in">#</a> in</h1>
<p>select <em>sname</em> form student where  sname in(‘zs’,‘ls’);</p>
<h1 id="is-null-is-not-null"><a class="markdownIt-Anchor" href="#is-null-is-not-null">#</a> is null / is not null</h1>
<p>select * from student where monmery is null;<br>
select * from student where monmery is not null;</p>
<h1 id="安全等于"><a class="markdownIt-Anchor" href="#安全等于">#</a> &lt;=&gt; 安全等于</h1>
<p>select * from student where sname &lt;=&gt; ‘qwe’;</p>
<h1 id="不等于"><a class="markdownIt-Anchor" href="#不等于">#</a> &lt;&gt;  != 不等于</h1>
<p>select * from stdetn where sage &lt;&gt; 21;</p>
<h1 id="order-by"><a class="markdownIt-Anchor" href="#order-by">#</a> order by</h1>
<p>默认是升序</p>
<h1 id="order-by-默认是升序"><a class="markdownIt-Anchor" href="#order-by-默认是升序">#</a> order by 默认是升序</h1>
<p>select * from student order by sage desc;//desc 是从高到低<br>
 select * from student order by sage asc;// 从低到高<br>
 //order by 子句冲可以放单个字段、多个字段、表达式、函数、别名、</p>
<h1 id="按年薪的高低显示员工的信息和年薪按别名排序"><a class="markdownIt-Anchor" href="#按年薪的高低显示员工的信息和年薪按别名排序">#</a> 按年薪的高低显示员工的信息和年薪 (按别名排序)</h1>
<p>select <em>,salary</em>12*(1+ifnull (commission_pct,0)) 年薪 from employees order by 年薪 desc;<br>
// 判断如果没有奖金率</p>
<h1 id="常见函数"><a class="markdownIt-Anchor" href="#常见函数">#</a> 常见函数</h1>
<p>// 调高代码的重用性，隐藏了实现细节<br>
函数的调用：select 函数名 (参数列表) [from 表]：</p>
<h5 id="1字符函数length-获取参数值的字节个数"><a class="markdownIt-Anchor" href="#1字符函数length-获取参数值的字节个数">#</a> 1. 字符函数 length // 获取参数值的字节个数</h5>
<p>select length (‘张三’);</p>
<h5 id="2concat拼接函数"><a class="markdownIt-Anchor" href="#2concat拼接函数">#</a> 2.concat 拼接函数</h5>
<p>select concat (last_name,’_’,first_name) 姓名 from student;</p>
<h5 id="3upper-lower"><a class="markdownIt-Anchor" href="#3upper-lower">#</a> 3.upper 、lower</h5>
<p>select concat (supper (last_name),lower (first_name)) 姓名 from student;</p>
<h5 id="4substr-substring截取字符串"><a class="markdownIt-Anchor" href="#4substr-substring截取字符串">#</a> 4.substr、substring// 截取字符串</h5>
<p>select substr (‘大撒大撒大撒法’，4) out_put;//mysql 的索引是从 1 开始的<br>
 select concat (upper (substr (last_name,1,1)),’_’,lower (substr (first_name,2))) out_put;</p>
<h5 id="5instr返回字串第一次出现的索引"><a class="markdownIt-Anchor" href="#5instr返回字串第一次出现的索引">#</a> 5.instr 返回字串第一次出现的索引</h5>
<p>select instr(‘qweqwe’,‘qwe’) as out_put;</p>
<h5 id="6trim"><a class="markdownIt-Anchor" href="#6trim">#</a> 6.trim</h5>
<p>select length (trim (‘张翠山’)) as out_put;</p>
<h5 id="7lpad-用指定的字符实现左填充指定长度"><a class="markdownIt-Anchor" href="#7lpad-用指定的字符实现左填充指定长度">#</a> 7.lpad 用指定的字符实现左填充指定长度</h5>
<p>select lpad (‘殷素素’,10,’*’) as out_put;</p>
<h5 id="8rpad-用指定的字符实现左填充指定长度"><a class="markdownIt-Anchor" href="#8rpad-用指定的字符实现左填充指定长度">#</a> 8.rpad 用指定的字符实现左填充指定长度</h5>
<p>select rpad (‘殷素素’,10,’*’) as out_put;</p>
<h5 id="9replace-替换"><a class="markdownIt-Anchor" href="#9replace-替换">#</a> 9.replace 替换</h5>
<p>select replace (‘我爱你’,‘我’,‘你’) as out_put;</p>
<h2 id="数学函数"><a class="markdownIt-Anchor" href="#数学函数">#</a> 数学函数</h2>
<h5 id="round四舍五入"><a class="markdownIt-Anchor" href="#round四舍五入">#</a> round 四舍五入</h5>
<p>select round(1.55);</p>
<h4 id="ceil向上取整"><a class="markdownIt-Anchor" href="#ceil向上取整">#</a> ceil 向上取整</h4>
<p>select ceil(1.00)</p>
<h4 id="floor向下取整"><a class="markdownIt-Anchor" href="#floor向下取整">#</a> floor 向下取整</h4>
<p>select floot(-9.99);</p>
<h4 id="truncate-截断"><a class="markdownIt-Anchor" href="#truncate-截断">#</a> truncate 截断</h4>
<p>select truncate(2.54984,1);</p>
<h4 id="mod取余"><a class="markdownIt-Anchor" href="#mod取余">#</a> mod 取余</h4>
<p>select mod(6,3);</p>
<h2 id="日期函数"><a class="markdownIt-Anchor" href="#日期函数">#</a> 日期函数</h2>
<h4 id="now-返回当前系统日期时间"><a class="markdownIt-Anchor" href="#now-返回当前系统日期时间">#</a> now 返回当前系统日期 + 时间</h4>
<h4 id="curdate"><a class="markdownIt-Anchor" href="#curdate">#</a> curdate</h4>
<h4 id="curtime"><a class="markdownIt-Anchor" href="#curtime">#</a> curtime</h4>
<h4 id="year"><a class="markdownIt-Anchor" href="#year">#</a> year</h4>
<h4 id="str_to_date1998-9-20y-d-c"><a class="markdownIt-Anchor" href="#str_to_date1998-9-20y-d-c">#</a> str_to_date(‘1998-9-20’,’%Y-%d-%c’)</h4>
<h4 id="selectdatediffnow1999-05-22-可以查询日期的差值"><a class="markdownIt-Anchor" href="#selectdatediffnow1999-05-22-可以查询日期的差值">#</a> selectdatediff (now (),‘1999-05-22’) // 可以查询日期的差值</h4>
<h4 id="timestampdiffyeardayhoursecond起始值结束值计算从出生日期到现在的年数"><a class="markdownIt-Anchor" href="#timestampdiffyeardayhoursecond起始值结束值计算从出生日期到现在的年数">#</a> timestampdiff (year/day/hour/second, 起始值，结束值) 计算从出生日期到现在的年数</h4>
<h2 id="流程控制函数"><a class="markdownIt-Anchor" href="#流程控制函数">#</a> 流程控制函数</h2>
<h4 id="if条件trurfalse"><a class="markdownIt-Anchor" href="#if条件trurfalse">#</a> if (条件，trur,false)</h4>
<h4 id="case-switch-case"><a class="markdownIt-Anchor" href="#case-switch-case">#</a> case： switch case</h4>
<p>case 表达式<br>
 when 常量 1 then 要显示的值 1 或语句 1;<br>
when 常量 1 then 要显示的值 2 或语句 2;<br>
else 要显示的值<br>
 end</p>
<h2 id="分组函数-sum-avg-min-max-count"><a class="markdownIt-Anchor" href="#分组函数-sum-avg-min-max-count">#</a> 分组函数 sum avg min max count</h2>
<h1 id="分组查询"><a class="markdownIt-Anchor" href="#分组查询">#</a> 分组查询</h1>
<p>select 查询的函数或值，要分组的字段 (可以放多个字段)<br>
 from 表名<br>
【where 可以加条件】<br>
group by 字段<br>
 having 根据筛选条件在进行筛选<br>
【order by 字段 desc】;<br>
 分组函数做条件肯定是在 having 中<br>
能用分组前筛，就放在分组前面</p>
<h1 id="连接查询"><a class="markdownIt-Anchor" href="#连接查询">#</a> 连接查询</h1>
<p>// 多表查询，当需要查询的字段涉及到多个表时，就需要连接查询<br>
笛卡尔乘积现象：表 1 有 m 行，表 2 有 n 行，查询的结果时 m*n 行<br>
 select column1,culumn2<br>
from table1,table2<br>
where <span class="exturl" data-url="aHR0cDovL3RhYmxlMS5pZD10YWJsZTIuaWQ=">table1.id=table2.id</span><br>
and 条件<br>
 group by 字段</p>
<h1 id="union-字符串"><a class="markdownIt-Anchor" href="#union-字符串">#</a> union 字符串</h1>
<p>就是将两个查询语句进行组合</p>
<h1 id="union-字符串-就是将两个查询语句进行组合"><a class="markdownIt-Anchor" href="#union-字符串-就是将两个查询语句进行组合">#</a> union 字符串 就是将两个查询语句进行组合</h1>
<p>select address,name from student<br>
where address=‘qwe’<br>
union 	distinct<br>
select address,name from teacher<br>
where address=‘qwe’<br>
order by address;</p>
<h1 id="连接"><a class="markdownIt-Anchor" href="#连接">#</a> 连接：</h1>
<pre><code>    inner join :获取两个表中字段字段匹配关系的记录
    left join：获取左表左右记录，即使有表没有对应匹配的记录
    right join：获取右表所有的记录，即使左表没有对应的记录

    select 列名
    from 主表
    left outer join 副表
    on 条件 一般是相同的id值
    where 条件
</code></pre>
<h1 id="子查询内查询外部的查询语句称为主查询或外查询"><a class="markdownIt-Anchor" href="#子查询内查询外部的查询语句称为主查询或外查询">#</a> 子查询 / 内查询，外部的查询语句，称为主查询或外查询</h1>
<p>分类：按子查询出现的位置：<br>
1.select 后面：仅仅支持标量子查询（结果集只有一行一列）<br>
2.from 后面：支持表子查询（结果集一般分为多行多列）<br>
3.where 或 having 后面：标量子查询（单行）、列子查询（多行）、行子查询（一行多列）、列子查询（一列多行）<br>
4.exists 后面（相关子查询）：表子查询（多行）<br>
// 一般使用标量子查询的较多</p>
<h1 id="事务"><a class="markdownIt-Anchor" href="#事务">#</a> 事务</h1>
<p>处理数据量大，复杂</p>
<h1 id="事务-处理数据量大复杂"><a class="markdownIt-Anchor" href="#事务-处理数据量大复杂">#</a> 事务 处理数据量大，复杂</h1>
<p>1. 只有 Mysql 中只有 Innodb 支持事务<br>
 2. 事务处理的数据库要么全部执行，要么全部不执行<br>
 3. 事务用来管理 insert,update,delete 语句<br>
它满足四个条件：<br>
原子性：一个事务中的所有的操作，要么全部完成，要么全部不完成<br>
一致性：在事务的开始和事务的结束以后，数据库的完整性没有被破坏<br>
隔离性：数据库允许多个并发事务同时对其数据库进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的比一至，事务隔离分为不同级别，包括：未提交，读提交，可重复读和串行化<br>
持久性：事务处理结束后，对数据的修改就是永久的，即使系统故障也不会丢失</p>
<h2 id="事务的实现的两种方式"><a class="markdownIt-Anchor" href="#事务的实现的两种方式">#</a> 事务的实现的两种方式：</h2>
<pre><code>1.使用begin,rollback,commit来实现,分别是开始，回滚，确认

1.使用begin,rollback,commit来实现,分别是开始，回滚，四五确认

2.使用set来改变mysql的自动提交模式
set autocommit=0禁止自动提交
set autocommit=1开启自动提交
</code></pre>
<p><img data-src="E:%5Cblog%5Cpublic%5Cimages%5C%E4%BA%8B%E5%8A%A1%E7%BA%A7%E5%88%AB.jpg" alt=""></p>
<h1 id="锁"><a class="markdownIt-Anchor" href="#锁">#</a> 锁</h1>
<p>锁是网络数据库中的一个非常重要的概念，当多个用户同时对数据库并发操作时，会带来数据不一致的问题，所以，锁主要用于多用户环境下保证数据库完整性和一致性。</p>
<p>帮助理解：以商场的试衣间为例，每个试衣间都可供多个消费者使用，因此，可能出现多个消费者同时需要使用试衣间试衣服。为了避免冲突，试衣间装了锁，某一个试衣服的人在试衣间里把锁锁住了，其他顾客就不能从外面打开了，只能等待里面的顾客试完衣服，从里面把锁打开，外面的人才能进去。</p>
<p>数据库锁出现的目的：处理并发问题</p>
<p>并发控制的主要采用的技术手段：乐观锁、悲观锁和时间戳。</p>
<h2 id="锁分类"><a class="markdownIt-Anchor" href="#锁分类">#</a> 锁分类</h2>
<p>从数据库系统角度分为三种：排他锁、共享锁、更新锁。<br>
从程序员角度分为两种：一种是悲观锁，一种乐观锁。</p>
<h3 id="悲观锁pessimistic-lock"><a class="markdownIt-Anchor" href="#悲观锁pessimistic-lock">#</a> 悲观锁（Pessimistic Lock）</h3>
<p>顾名思义，很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人拿这个数据就会 block（阻塞），直到它拿锁。</p>
<p>悲观锁（Pessimistic Lock）：正如其名，具有强烈的独占和排他特性。它指的是对数据被外界（包括本系统当前的其他事务，以及来自外部系统的事务处理）修改持保守态度，因此，在整个数据处理过程中，将数据处于锁定状态。悲观锁的实现，往往依靠数据库提供的锁机制（也只有数据库层提供的锁机制才能真正保证数据访问的排他性，否则，即使在本系统中实现了加锁机制，也无法保证外部系统不会修改数据）。</p>
<p>传统的关系数据库里用到了很多这种锁机制，比如行锁、表锁、读锁、写锁等，都是在操作之前先上锁。</p>
<p>悲观锁按使用性质划分</p>
<h4 id="共享锁share-lock"><a class="markdownIt-Anchor" href="#共享锁share-lock">#</a> 共享锁（Share Lock）</h4>
<p>S 锁，也叫读锁，用于所有的只读数据操作。共享锁是非独占的，允许多个并发事务读取其锁定的资源。<br>
性质</p>
<ol>
<li>多个事务可封锁同一个共享页；</li>
<li>任何事务都不能修改该页；</li>
<li>通常是该页被读取完毕，S 锁立即被释放。</li>
</ol>
<p>在 SQL Server 中，默认情况下，数据被读取后，立即释放共享锁。<br>
例如，执行查询语句 “SELECT * FROM my_table” 时，首先锁定第一页，读取之后，释放对第一页的锁定，然后锁定第二页。这样，就允许在读操作过程中，修改未被锁定的第一页。<br>
例如，语句 “SELECT * FROM my_table HOLDLOCK” 就要求在整个查询过程中，保持对表的锁定，直到查询完成才释放锁定。</p>
<h4 id="排他锁exclusive-lock"><a class="markdownIt-Anchor" href="#排他锁exclusive-lock">#</a> 排他锁（Exclusive Lock）</h4>
<p>X 锁，也叫写锁，表示对数据进行写操作。如果一个事务对对象加了排他锁，其他事务就不能再给它加任何锁了。（某个顾客把试衣间从里面反锁了，其他顾客想要使用这个试衣间，就只有等待锁从里面打开了。）<br>
性质</p>
<ol>
<li>仅允许一个事务封锁此页；</li>
<li>其他任何事务必须等到 X 锁被释放才能对该页进行访问；</li>
<li>X 锁一直到事务结束才能被释放。</li>
</ol>
<p>产生排他锁的 SQL 语句如下：select * from ad_plan for update;</p>
<h4 id="更新锁"><a class="markdownIt-Anchor" href="#更新锁">#</a> 更新锁</h4>
<p>U 锁，在修改操作的初始化阶段用来锁定可能要被修改的资源，这样可以避免使用共享锁造成的死锁现象。</p>
<p>因为当使用共享锁时，修改数据的操作分为两步：</p>
<ol>
<li>首先获得一个共享锁，读取数据，</li>
<li>然后将共享锁升级为排他锁，再执行修改操作。<br>
这样如果有两个或多个事务同时对一个事务申请了共享锁，在修改数据时，这些事务都要将共享锁升级为排他锁。这时，这些事务都不会释放共享锁，而是一直等待对方释放，这样就造成了死锁。<br>
如果一个数据在修改前直接申请更新锁，在数据修改时再升级为排他锁，就可以避免死锁。</li>
</ol>
<p>性质</p>
<ol>
<li>用来预定要对此页施加 X 锁，它允许其他事务读，但不允许再施加 U 锁或 X 锁；</li>
<li>当被读取的页要被更新时，则升级为 X 锁；</li>
<li>U 锁一直到事务结束时才能被释放。</li>
</ol>
<p>悲观锁按作用范围划分为：行锁、表锁。（这部分摘自 https://www.jianshu.com/p/eb41df600775 ）</p>
<h4 id="行锁"><a class="markdownIt-Anchor" href="#行锁">#</a> 行锁</h4>
<p>锁的作用范围是行级别。</p>
<h4 id="表锁"><a class="markdownIt-Anchor" href="#表锁">#</a> 表锁</h4>
<p>锁的作用范围是整张表。</p>
<p>数据库能够确定那些行需要锁的情况下使用行锁，如果不知道会影响哪些行的时候就会使用表锁。</p>
<p>举个例子，一个用户表 user，有主键 id 和用户生日 birthday。<br>
当你使用 update … where id=? 这样的语句时，数据库明确知道会影响哪一行，它就会使用行锁；<br>
 当你使用 update … where birthday=? 这样的的语句时，因为事先不知道会影响哪些行就可能会使用表锁。</p>
<h3 id="乐观锁optimistic-lock"><a class="markdownIt-Anchor" href="#乐观锁optimistic-lock">#</a> 乐观锁（Optimistic Lock）</h3>
<p>顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以，不会上锁。但是在更新的时候会判断一下在此期间别人有没有更新这个数据，可以使用版本号等机制。</p>
<p>乐观锁（ Optimistic Locking ）： 相对悲观锁而言，乐观锁机制采取了更加宽松的加锁机制。<br>
悲观锁大多数情况下依靠数据库的锁机制实现，以保证操作最大程度的独占性。但随之而来的就是数据库性能的大量开销，特别是对长事务而言，这样的开销往往无法承受。而乐观锁机制在一定程度上解决了这个问题。<br>
乐观锁，大多是基于数据版本（ Version ）记录机制实现。<br>
数据版本：为数据增加一个版本标识，在基于数据库表的版本解决方案中，一般是通过为数据库表增加一个 “version” 字段来实现。读取出数据时，将此版本号一同读出，之后更新时，对此版本号加一。此时，将提交数据的版本数据与数据库表对应记录的当前版本信息进行比对，如果提交的数据版本号大于数据库表当前版本号，则予以更新，否则认为是过期数据。</p>
<p>乐观锁适用于多读的应用类型，这样可以提高吞吐量，像数据库如果提供类似于 write_condition 机制的其实都是提供的乐观锁。</p>
<p>乐观锁的实现方式（这部分摘自 https://www.jianshu.com/p/eb41df600775 ）</p>
<h4 id="版本号version"><a class="markdownIt-Anchor" href="#版本号version">#</a> 版本号（version）</h4>
<p>版本号（记为 version）：就是给数据增加一个版本标识，在数据库上就是表中增加一个 version 字段，每次更新把这个字段加 1，读取数据的时候把 version 读出来，更新的时候比较 version，如果还是开始读取的 version 就可以更新了，如果现在的 version 比老的 version 大，说明有其他事务更新了该数据，并增加了版本号，这时候得到一个无法更新的通知，用户自行根据这个通知来决定怎么处理，比如重新开始一遍。这里的关键是判断 version 和更新两个动作需要作为一个原子单元执行，否则在你判断可以更新以后正式更新之前有别的事务修改了 version，这个时候你再去更新就可能会覆盖前一个事务做的更新，造成第二类丢失更新，所以你可以使用 update … where … and version=”old version” 这样的语句，根据返回结果是 0 还是非 0 来得到通知，如果是 0 说明更新没有成功，因为 version 被改了，如果返回非 0 说明更新成功。</p>
<h4 id="时间戳使用数据库服务器的时间戳"><a class="markdownIt-Anchor" href="#时间戳使用数据库服务器的时间戳">#</a> 时间戳（使用数据库服务器的时间戳）</h4>
<p>时间戳（timestamp）：和版本号基本一样，只是通过时间戳来判断而已，注意时间戳要使用数据库服务器的时间戳不能是业务系统的时间。</p>
<p>待更新字段</p>
<p>待更新字段：和版本号方式相似，只是不增加额外字段，直接使用有效数据字段做版本控制信息，因为有时候我们可能无法改变旧系统的数据库表结构。假设有个待更新字段叫 count, 先去读取这个 count, 更新的时候去比较数据库中 count 的值是不是我期望的值（即开始读的值），如果是就把我修改的 count 的值更新到该字段，否则更新失败。java 的基本类型的原子类型对象如 AtomicInteger 就是这种思想。</p>
<p>所有字段<br>
所有字段：和待更新字段类似，只是使用所有字段做版本控制信息，只有所有字段都没变化才会执行更新。<br>
乐观锁几种方式的区别（这部分摘自 https://www.jianshu.com/p/eb41df600775 ）<br>
新系统设计可以使用 version 方式和 timestamp 方式，需要增加字段，应用范围是整条数据，不论那个字段修改都会更新 version, 也就是说两个事务更新同一条记录的两个不相关字段也是互斥的，不能同步进行。旧系统不能修改数据库表结构的时候使用数据字段作为版本控制信息，不需要新增字段，待更新字段方式只要其他事务修改的字段和当前事务修改的字段没有重叠就可以同步进行，并发性更高。<br>
并发控制会造成两种锁（这部分摘自 https://www.cnblogs.com/ismallboy/p/5574006.html）<br>
活锁</p>
<h4 id="死锁"><a class="markdownIt-Anchor" href="#死锁">#</a> 死锁</h4>
<p>并发控制会造成活锁和死锁，就像操作系统那样，会因为互相等待而导致。</p>
<h4 id="活锁"><a class="markdownIt-Anchor" href="#活锁">#</a> 活锁</h4>
<p>定义：指的是 T1 封锁了数据 R，T2 同时也请求封锁数据 R，T3 也请求封锁数据 R，当 T1 释放了锁之后，T3 会锁住 R，T4 也请求封锁 R，则 T2 就会一直等待下去。<br>
解决方法：采用 “先来先服务” 策略可以避免。</p>
<p>死锁<br>
定义：就是我等你，你又等我，双方就会一直等待下去。比如：T1 封锁了数据 R1，正请求对 R2 封锁，而 T2 封住了 R2, 正请求封锁 R1，这样就会导致死锁，死锁这种没有完全解决的方法，只能尽量预防。<br>
预防方法：</p>
<ol>
<li>一次封锁法，指的是一次性把所需要的数据全部封锁住，但是这样会扩大了封锁的范围，降低系统的并发度；</li>
<li>顺序封锁法，指的是事先对数据对象指定一个封锁顺序，要对数据进行封锁，只能按照规定的顺序来封锁，但是这个一般不大可能的。</li>
</ol>
<p>系统判定死锁的方法：</p>
<p>超时法：如果某个事物的等待时间超过指定时限，则判定为出现死锁；<br>
 等待图法：如果事务等待图中出现了回路，则判断出现了死锁。<br>
对于解决死锁的方法，只能是撤销一个处理死锁代价最小的事务，释放此事务持有的所有锁，同时对撤销的事务所执行的数据修改操作必须加以恢复。</p>
<h1 id="索引"><a class="markdownIt-Anchor" href="#索引">#</a> 索引</h1>
<h1 id="索引-2"><a class="markdownIt-Anchor" href="#索引-2">#</a> 索引</h1>
<p>创建索引<br>
 create index 索引名称 on 表名 (列名 (length));</p>
<h3 id="创建唯一索引"><a class="markdownIt-Anchor" href="#创建唯一索引">#</a> 创建唯一索引</h3>
<p>create unique index indexname on student(name(length));</p>
<h3 id="临时表-mysql-临时表在我们需要保存一些临时数据时是非常有用的-临时表只在当前连接可见当关闭连接时mysql会自动删除表并释放所有空间"><a class="markdownIt-Anchor" href="#临时表-mysql-临时表在我们需要保存一些临时数据时是非常有用的-临时表只在当前连接可见当关闭连接时mysql会自动删除表并释放所有空间">#</a> 临时表 MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql 会自动删除表并释放所有空间。</h3>
<h3 id="复制表-如果我们需要完全的复制mysql的数据表包括表的结构索引默认值等-如果仅仅使用create-table-select-命令是无法实现的"><a class="markdownIt-Anchor" href="#复制表-如果我们需要完全的复制mysql的数据表包括表的结构索引默认值等-如果仅仅使用create-table-select-命令是无法实现的">#</a> 复制表 如果我们需要完全的复制 MySQL 的数据表，包括表的结构，索引，默认值等。 如果仅仅使用 CREATE TABLE … SELECT 命令，是无法实现的。</h3>
<h1 id="序列"><a class="markdownIt-Anchor" href="#序列">#</a> 序列</h1>
<h1 id="临时表-mysql-临时表在我们需要保存一些临时数据时是非常有用的-临时表只在当前连接可见当关闭连接时mysql会自动删除表并释放所有空间-2"><a class="markdownIt-Anchor" href="#临时表-mysql-临时表在我们需要保存一些临时数据时是非常有用的-临时表只在当前连接可见当关闭连接时mysql会自动删除表并释放所有空间-2">#</a> 临时表 MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql 会自动删除表并释放所有空间。</h1>
<h1 id="复制表-如果我们需要完全的复制mysql的数据表包括表的结构索引默认值等-如果仅仅使用create-table-select-命令是无法实现的-2"><a class="markdownIt-Anchor" href="#复制表-如果我们需要完全的复制mysql的数据表包括表的结构索引默认值等-如果仅仅使用create-table-select-命令是无法实现的-2">#</a> 复制表 如果我们需要完全的复制 MySQL 的数据表，包括表的结构，索引，默认值等。 如果仅仅使用 CREATE TABLE … SELECT 命令，是无法实现的。</h1>
<h1 id="序列-2"><a class="markdownIt-Anchor" href="#序列-2">#</a> 序列</h1>
<p>Mysql 的序列化是一组数组<br>
最简单的方法就是用 auto_increment 来定义一个列让其实现自增的方法</p>
<h1 id="sql注入"><a class="markdownIt-Anchor" href="#sql注入">#</a> SQL 注入</h1>
<p>所谓的 SQL 注入就是把 SQL 命令插入到 web 表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的 SQL 命令<br>
我们需要注意以下几点：<br>
1. 永远不要新人用户的输入，对用户的输入进行校验，可以通过正则表达式，或者是限制长度，对单引号和双 “-” 进行转换等<br>
 2. 永远不要使用动态拼装 SQL，可以使用参数化的 sql 或者直接使用存储过程进行数据查询存取<br>
 3. 永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。<br>
4. 不要把机密信息直接存放，加密或者 hash 掉密码和敏感的信息。<br>
5. 应用的异常信息应该给出尽可能少的提示，最好使用自定义的错误信息对原始错误信息进行包装<br>
 6.sql 注入的检测方法一般采取辅助软件或网站平台来检测，软件一般采用 sql 注入检测工具 jsky，网站平台就有亿思网站安全平台检测工具。MDCSOFT SCAN 等。采用 MDCSOFT-IPS 可以有效的防御 SQL 注入，XSS 攻击等。</p>
<h1 id="练习"><a class="markdownIt-Anchor" href="#练习">#</a> 练习</h1>
<h2 id="查询"><a class="markdownIt-Anchor" href="#查询">#</a> 查询</h2>
<h1 id="分页查询"><a class="markdownIt-Anchor" href="#分页查询">#</a> 分页查询</h1>
<p>语法：</p>
<pre><code class="language-mysql">#     select 查询列表
#     from 表
#     join type join 表2
#     on 连接条件
#     where 筛选条件
#     group by 分组字段
#     having 分组后的筛选 
#     order by 排序的字段]
#     limit offset,size;
#     offset：要显示条目的起始索引（起始索引从0开始）
#     size：要显示的条目个数
</code></pre>
<h2 id="查询-2"><a class="markdownIt-Anchor" href="#查询-2">#</a> 查询</h2>
<h1 id="练习查询"><a class="markdownIt-Anchor" href="#练习查询">#</a> 练习：查询</h1>
<pre><code class="language-mysql">1.
select(
    select salary
        from emplory
        limit 1 offset 1
    ) as secondhighestsalary;



</code></pre>
<h2 id="删除"><a class="markdownIt-Anchor" href="#删除">#</a> 删除</h2>
<h1 id="练习删除"><a class="markdownIt-Anchor" href="#练习删除">#</a> 练习：删除</h1>
<pre><code class="language-mysql">#     DELETE p1 
#     FROM Person p1,Person p2
#     WHERE
#         p1.Email = p2.Email AND p1.Id &gt; p2.Id
   
</code></pre>
<h2 id="列转行"><a class="markdownIt-Anchor" href="#列转行">#</a> 列转行</h2>
<h1 id="列转行-2"><a class="markdownIt-Anchor" href="#列转行-2">#</a> 列转行</h1>
<pre><code class="language-mysq">SELECT year,
    MAX(CASE month WHEN '1' THEN amount ELSE 0 END ) m1,
    MAX(CASE month WHEN '2' THEN amount ELSE 0 END ) m2,
    MAX(CASE month WHEN '3' THEN amount ELSE 0 END ) m3,
		MAX(CASE month WHEN '4' THEN amount ELSE 0 END ) m4
FROM test
GROUP BY year;
</code></pre>
<h2 id="按年薪的高低显示员工的信息和年薪按别名排序-2"><a class="markdownIt-Anchor" href="#按年薪的高低显示员工的信息和年薪按别名排序-2">#</a> 按年薪的高低显示员工的信息和年薪 (按别名排序)</h2>
<p>select <em>,salary</em>12*(1+ifnull (commission_pct,0)) 年薪 from employees order by 年薪 desc;<br>
// 判断如果没有奖金率</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>aeiou <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

      <div class="tags">
          <a href="/tags/Mysql/" rel="tag"><i class="ic i-tag"></i> Mysql</a>
          <a href="/tags/database/" rel="tag"><i class="ic i-tag"></i> database</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span id="passages/Mysql/" class="item leancloud_visitors" data-flag-title="Mysql" title="阅读次数">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">阅读次数</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">次</span>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> 赞赏</button>
  <p>请我喝[茶]~(￣▽￣)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/alipay.png" alt="Zhouy 支付宝">
        <p>支付宝</p>
      </div>
      
      <div>
        <img data-src="/images/paypal.png" alt="Zhouy 宝贝不是paypal">
        <p>宝贝不是paypal</p>
      </div>
      
      <div>
        <img data-src="/images/wechatpay.png" alt="Zhouy 微信支付">
        <p>微信支付</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>Zhouy <i class="ic i-at"><em>@</em></i>Hexo
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="https://zhovy.github.io/passages/Mysql/" title="Mysql">https://zhovy.github.io/passages/Mysql/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/passages/MybatisPlus/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipew8gmvyj20zk0m87wh.jpg" title="MybatisPlus">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>MybatisPlus</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/passages/index/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicis3attqj20zk0m8k7l.jpg" title="index">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>index</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8Einnodb-myisammemoryblackhole"><span class="toc-number">1.</span> <span class="toc-text"> 存储引擎：Innodb myisam,memory,blackhole</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.</span> <span class="toc-text"> 创建表的完整性约束</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text"> 数据类型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%89%88%E6%9C%AC"><span class="toc-number">4.</span> <span class="toc-text"> 查询版本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%AB%E5%90%8D"><span class="toc-number">5.</span> <span class="toc-text"> 别名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#distinct-%E5%8E%BB%E9%87%8D"><span class="toc-number">6.</span> <span class="toc-text"> distinct 去重</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#unsigned"><span class="toc-number">7.</span> <span class="toc-text"> unsigned</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#concat"><span class="toc-number">8.</span> <span class="toc-text"> concat</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ifnull%E5%AD%97%E6%AE%B5%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">9.</span> <span class="toc-text"> ifnull (字段名，返回值)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2like-%E5%8F%AA%E6%98%AF%E9%80%9A%E9%85%8D%E7%AC%A6-%E4%B8%8D%E8%83%BD%E6%AD%A3%E5%88%99"><span class="toc-number">10.</span> <span class="toc-text"> 模糊查询 Like 只是通配符 不能正则</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-rlike-%E5%8F%AF%E4%BB%A5%E6%98%AF%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E9%9C%80%E8%A6%81"><span class="toc-number">11.</span> <span class="toc-text"> 正则表达式 rlike 可以是正则表达式 需要</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#between-and-%E5%8C%85%E5%90%AB%E4%B8%B4%E7%95%8C%E5%80%BC"><span class="toc-number">12.</span> <span class="toc-text"> between and 包含临界值</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#in"><span class="toc-number">13.</span> <span class="toc-text"> in</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#is-null-is-not-null"><span class="toc-number">14.</span> <span class="toc-text"> is null &#x2F; is not null</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%AD%89%E4%BA%8E"><span class="toc-number">15.</span> <span class="toc-text"> &lt;&#x3D;&gt; 安全等于</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8D%E7%AD%89%E4%BA%8E"><span class="toc-number">16.</span> <span class="toc-text"> &lt;&gt;  !&#x3D; 不等于</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#order-by"><span class="toc-number">17.</span> <span class="toc-text"> order by</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#order-by-%E9%BB%98%E8%AE%A4%E6%98%AF%E5%8D%87%E5%BA%8F"><span class="toc-number">18.</span> <span class="toc-text"> order by 默认是升序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8C%89%E5%B9%B4%E8%96%AA%E7%9A%84%E9%AB%98%E4%BD%8E%E6%98%BE%E7%A4%BA%E5%91%98%E5%B7%A5%E7%9A%84%E4%BF%A1%E6%81%AF%E5%92%8C%E5%B9%B4%E8%96%AA%E6%8C%89%E5%88%AB%E5%90%8D%E6%8E%92%E5%BA%8F"><span class="toc-number">19.</span> <span class="toc-text"> 按年薪的高低显示员工的信息和年薪 (按别名排序)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0"><span class="toc-number">20.</span> <span class="toc-text"> 常见函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0length-%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E5%80%BC%E7%9A%84%E5%AD%97%E8%8A%82%E4%B8%AA%E6%95%B0"><span class="toc-number">20.0.0.0.1.</span> <span class="toc-text"> 1. 字符函数 length &#x2F;&#x2F; 获取参数值的字节个数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2concat%E6%8B%BC%E6%8E%A5%E5%87%BD%E6%95%B0"><span class="toc-number">20.0.0.0.2.</span> <span class="toc-text"> 2.concat 拼接函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3upper-lower"><span class="toc-number">20.0.0.0.3.</span> <span class="toc-text"> 3.upper 、lower</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4substr-substring%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">20.0.0.0.4.</span> <span class="toc-text"> 4.substr、substring&#x2F;&#x2F; 截取字符串</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5instr%E8%BF%94%E5%9B%9E%E5%AD%97%E4%B8%B2%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%87%BA%E7%8E%B0%E7%9A%84%E7%B4%A2%E5%BC%95"><span class="toc-number">20.0.0.0.5.</span> <span class="toc-text"> 5.instr 返回字串第一次出现的索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6trim"><span class="toc-number">20.0.0.0.6.</span> <span class="toc-text"> 6.trim</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7lpad-%E7%94%A8%E6%8C%87%E5%AE%9A%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AE%9E%E7%8E%B0%E5%B7%A6%E5%A1%AB%E5%85%85%E6%8C%87%E5%AE%9A%E9%95%BF%E5%BA%A6"><span class="toc-number">20.0.0.0.7.</span> <span class="toc-text"> 7.lpad 用指定的字符实现左填充指定长度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8rpad-%E7%94%A8%E6%8C%87%E5%AE%9A%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AE%9E%E7%8E%B0%E5%B7%A6%E5%A1%AB%E5%85%85%E6%8C%87%E5%AE%9A%E9%95%BF%E5%BA%A6"><span class="toc-number">20.0.0.0.8.</span> <span class="toc-text"> 8.rpad 用指定的字符实现左填充指定长度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9replace-%E6%9B%BF%E6%8D%A2"><span class="toc-number">20.0.0.0.9.</span> <span class="toc-text"> 9.replace 替换</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-number">20.1.</span> <span class="toc-text"> 数学函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#round%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5"><span class="toc-number">20.1.0.0.1.</span> <span class="toc-text"> round 四舍五入</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ceil%E5%90%91%E4%B8%8A%E5%8F%96%E6%95%B4"><span class="toc-number">20.1.0.1.</span> <span class="toc-text"> ceil 向上取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#floor%E5%90%91%E4%B8%8B%E5%8F%96%E6%95%B4"><span class="toc-number">20.1.0.2.</span> <span class="toc-text"> floor 向下取整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#truncate-%E6%88%AA%E6%96%AD"><span class="toc-number">20.1.0.3.</span> <span class="toc-text"> truncate 截断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mod%E5%8F%96%E4%BD%99"><span class="toc-number">20.1.0.4.</span> <span class="toc-text"> mod 取余</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">20.2.</span> <span class="toc-text"> 日期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#now-%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4"><span class="toc-number">20.2.0.1.</span> <span class="toc-text"> now 返回当前系统日期 + 时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#curdate"><span class="toc-number">20.2.0.2.</span> <span class="toc-text"> curdate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#curtime"><span class="toc-number">20.2.0.3.</span> <span class="toc-text"> curtime</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#year"><span class="toc-number">20.2.0.4.</span> <span class="toc-text"> year</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#str_to_date1998-9-20y-d-c"><span class="toc-number">20.2.0.5.</span> <span class="toc-text"> str_to_date(‘1998-9-20’,’%Y-%d-%c’)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#selectdatediffnow1999-05-22-%E5%8F%AF%E4%BB%A5%E6%9F%A5%E8%AF%A2%E6%97%A5%E6%9C%9F%E7%9A%84%E5%B7%AE%E5%80%BC"><span class="toc-number">20.2.0.6.</span> <span class="toc-text"> selectdatediff (now (),‘1999-05-22’) &#x2F;&#x2F; 可以查询日期的差值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#timestampdiffyeardayhoursecond%E8%B5%B7%E5%A7%8B%E5%80%BC%E7%BB%93%E6%9D%9F%E5%80%BC%E8%AE%A1%E7%AE%97%E4%BB%8E%E5%87%BA%E7%94%9F%E6%97%A5%E6%9C%9F%E5%88%B0%E7%8E%B0%E5%9C%A8%E7%9A%84%E5%B9%B4%E6%95%B0"><span class="toc-number">20.2.0.7.</span> <span class="toc-text"> timestampdiff (year&#x2F;day&#x2F;hour&#x2F;second, 起始值，结束值) 计算从出生日期到现在的年数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-number">20.3.</span> <span class="toc-text"> 流程控制函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#if%E6%9D%A1%E4%BB%B6trurfalse"><span class="toc-number">20.3.0.1.</span> <span class="toc-text"> if (条件，trur,false)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#case-switch-case"><span class="toc-number">20.3.0.2.</span> <span class="toc-text"> case： switch case</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0-sum-avg-min-max-count"><span class="toc-number">20.4.</span> <span class="toc-text"> 分组函数 sum avg min max count</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">21.</span> <span class="toc-text"> 分组查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">22.</span> <span class="toc-text"> 连接查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#union-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">23.</span> <span class="toc-text"> union 字符串</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#union-%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%B0%B1%E6%98%AF%E5%B0%86%E4%B8%A4%E4%B8%AA%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E8%BF%9B%E8%A1%8C%E7%BB%84%E5%90%88"><span class="toc-number">24.</span> <span class="toc-text"> union 字符串 就是将两个查询语句进行组合</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-number">25.</span> <span class="toc-text"> 连接：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%86%85%E6%9F%A5%E8%AF%A2%E5%A4%96%E9%83%A8%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%A7%B0%E4%B8%BA%E4%B8%BB%E6%9F%A5%E8%AF%A2%E6%88%96%E5%A4%96%E6%9F%A5%E8%AF%A2"><span class="toc-number">26.</span> <span class="toc-text"> 子查询 &#x2F; 内查询，外部的查询语句，称为主查询或外查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">27.</span> <span class="toc-text"> 事务</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1-%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E9%87%8F%E5%A4%A7%E5%A4%8D%E6%9D%82"><span class="toc-number">28.</span> <span class="toc-text"> 事务 处理数据量大，复杂</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">28.1.</span> <span class="toc-text"> 事务的实现的两种方式：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%94%81"><span class="toc-number">29.</span> <span class="toc-text"> 锁</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%81%E5%88%86%E7%B1%BB"><span class="toc-number">29.1.</span> <span class="toc-text"> 锁分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%82%B2%E8%A7%82%E9%94%81pessimistic-lock"><span class="toc-number">29.1.1.</span> <span class="toc-text"> 悲观锁（Pessimistic Lock）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E9%94%81share-lock"><span class="toc-number">29.1.1.1.</span> <span class="toc-text"> 共享锁（Share Lock）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E4%BB%96%E9%94%81exclusive-lock"><span class="toc-number">29.1.1.2.</span> <span class="toc-text"> 排他锁（Exclusive Lock）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E9%94%81"><span class="toc-number">29.1.1.3.</span> <span class="toc-text"> 更新锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E9%94%81"><span class="toc-number">29.1.1.4.</span> <span class="toc-text"> 行锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E9%94%81"><span class="toc-number">29.1.1.5.</span> <span class="toc-text"> 表锁</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%90%E8%A7%82%E9%94%81optimistic-lock"><span class="toc-number">29.1.2.</span> <span class="toc-text"> 乐观锁（Optimistic Lock）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E5%8F%B7version"><span class="toc-number">29.1.2.1.</span> <span class="toc-text"> 版本号（version）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">29.1.2.2.</span> <span class="toc-text"> 时间戳（使用数据库服务器的时间戳）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%BB%E9%94%81"><span class="toc-number">29.1.2.3.</span> <span class="toc-text"> 死锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B4%BB%E9%94%81"><span class="toc-number">29.1.2.4.</span> <span class="toc-text"> 活锁</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">30.</span> <span class="toc-text"> 索引</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95-2"><span class="toc-number">31.</span> <span class="toc-text"> 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="toc-number">31.0.1.</span> <span class="toc-text"> 创建唯一索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E8%A1%A8-mysql-%E4%B8%B4%E6%97%B6%E8%A1%A8%E5%9C%A8%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E4%BF%9D%E5%AD%98%E4%B8%80%E4%BA%9B%E4%B8%B4%E6%97%B6%E6%95%B0%E6%8D%AE%E6%97%B6%E6%98%AF%E9%9D%9E%E5%B8%B8%E6%9C%89%E7%94%A8%E7%9A%84-%E4%B8%B4%E6%97%B6%E8%A1%A8%E5%8F%AA%E5%9C%A8%E5%BD%93%E5%89%8D%E8%BF%9E%E6%8E%A5%E5%8F%AF%E8%A7%81%E5%BD%93%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%E6%97%B6mysql%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4%E8%A1%A8%E5%B9%B6%E9%87%8A%E6%94%BE%E6%89%80%E6%9C%89%E7%A9%BA%E9%97%B4"><span class="toc-number">31.0.2.</span> <span class="toc-text"> 临时表 MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql 会自动删除表并释放所有空间。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8-%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%AE%8C%E5%85%A8%E7%9A%84%E5%A4%8D%E5%88%B6mysql%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%8C%85%E6%8B%AC%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84%E7%B4%A2%E5%BC%95%E9%BB%98%E8%AE%A4%E5%80%BC%E7%AD%89-%E5%A6%82%E6%9E%9C%E4%BB%85%E4%BB%85%E4%BD%BF%E7%94%A8create-table-select-%E5%91%BD%E4%BB%A4%E6%98%AF%E6%97%A0%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%9A%84"><span class="toc-number">31.0.3.</span> <span class="toc-text"> 复制表 如果我们需要完全的复制 MySQL 的数据表，包括表的结构，索引，默认值等。 如果仅仅使用 CREATE TABLE … SELECT 命令，是无法实现的。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%8F%E5%88%97"><span class="toc-number">32.</span> <span class="toc-text"> 序列</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E8%A1%A8-mysql-%E4%B8%B4%E6%97%B6%E8%A1%A8%E5%9C%A8%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E4%BF%9D%E5%AD%98%E4%B8%80%E4%BA%9B%E4%B8%B4%E6%97%B6%E6%95%B0%E6%8D%AE%E6%97%B6%E6%98%AF%E9%9D%9E%E5%B8%B8%E6%9C%89%E7%94%A8%E7%9A%84-%E4%B8%B4%E6%97%B6%E8%A1%A8%E5%8F%AA%E5%9C%A8%E5%BD%93%E5%89%8D%E8%BF%9E%E6%8E%A5%E5%8F%AF%E8%A7%81%E5%BD%93%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%E6%97%B6mysql%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4%E8%A1%A8%E5%B9%B6%E9%87%8A%E6%94%BE%E6%89%80%E6%9C%89%E7%A9%BA%E9%97%B4-2"><span class="toc-number">33.</span> <span class="toc-text"> 临时表 MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql 会自动删除表并释放所有空间。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8-%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%AE%8C%E5%85%A8%E7%9A%84%E5%A4%8D%E5%88%B6mysql%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%8C%85%E6%8B%AC%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84%E7%B4%A2%E5%BC%95%E9%BB%98%E8%AE%A4%E5%80%BC%E7%AD%89-%E5%A6%82%E6%9E%9C%E4%BB%85%E4%BB%85%E4%BD%BF%E7%94%A8create-table-select-%E5%91%BD%E4%BB%A4%E6%98%AF%E6%97%A0%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%9A%84-2"><span class="toc-number">34.</span> <span class="toc-text"> 复制表 如果我们需要完全的复制 MySQL 的数据表，包括表的结构，索引，默认值等。 如果仅仅使用 CREATE TABLE … SELECT 命令，是无法实现的。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%8F%E5%88%97-2"><span class="toc-number">35.</span> <span class="toc-text"> 序列</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5"><span class="toc-number">36.</span> <span class="toc-text"> SQL 注入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">37.</span> <span class="toc-text"> 练习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">37.1.</span> <span class="toc-text"> 查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">38.</span> <span class="toc-text"> 分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-2"><span class="toc-number">38.1.</span> <span class="toc-text"> 查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E6%9F%A5%E8%AF%A2"><span class="toc-number">39.</span> <span class="toc-text"> 练习：查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">39.1.</span> <span class="toc-text"> 删除</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E5%88%A0%E9%99%A4"><span class="toc-number">40.</span> <span class="toc-text"> 练习：删除</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%BD%AC%E8%A1%8C"><span class="toc-number">40.1.</span> <span class="toc-text"> 列转行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%BD%AC%E8%A1%8C-2"><span class="toc-number">41.</span> <span class="toc-text"> 列转行</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E5%B9%B4%E8%96%AA%E7%9A%84%E9%AB%98%E4%BD%8E%E6%98%BE%E7%A4%BA%E5%91%98%E5%B7%A5%E7%9A%84%E4%BF%A1%E6%81%AF%E5%92%8C%E5%B9%B4%E8%96%AA%E6%8C%89%E5%88%AB%E5%90%8D%E6%8E%92%E5%BA%8F-2"><span class="toc-number">41.1.</span> <span class="toc-text"> 按年薪的高低显示员工的信息和年薪 (按别名排序)</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="Zhouy"
      data-src="/images/panda.jpg">
  <p class="name" itemprop="name">Zhouy</p>
  <div class="description" itemprop="description">What's the point of living?</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">36</span>
        <span class="name">文章</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">分类</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">39</span>
        <span class="name">标签</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3pob3Z5" title="https:&#x2F;&#x2F;github.com&#x2F;zhovy"><i class="ic i-github"></i></span>
      <span class="exturl item bilibili" data-url="aHR0cHM6Ly9iMjMudHYvTVJFVGpnSw==" title="https:&#x2F;&#x2F;b23.tv&#x2F;MRETjgK"><i class="ic i-bilibili"></i></span>
      <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9jYWlqaTEwMjQ=" title="https:&#x2F;&#x2F;twitter.com&#x2F;caiji1024"><i class="ic i-twitter"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTU3NzM3NjAxMw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;577376013"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vdS82NTE2NzE5MjEx" title="https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;6516719211"><i class="ic i-weibo"></i></span>
      <a href="/2285685300@qq.com" title="2285685300@qq.com" class="item email"><i class="ic i-envelope"></i></a>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>关于</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-magic"></i>links</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/passages/MybatisPlus/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/passages/index/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Move%20House/" title="2023-04-21-要搬家了">2023-04-21-要搬家了</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Mysql/" title="Mysql">Mysql</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Git/" title="Git">Git</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/SpringCloud/" title="2019-11-25-SpringCloud">2019-11-25-SpringCloud</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Listner/" title="Listener">Listener</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Redis/" title="Redis">Redis</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Mybatis/" title="Mybatis">Mybatis</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/JSTL/" title="JSTL">JSTL</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Dubbo/" title="Dubbo">Dubbo</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/passages/Structure-And-Algorithm/" title="Structure And Algorithm">Structure And Algorithm</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>最新评论</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Zhouy @ 🐯</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="站点总字数">70k 字</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="站点阅读时长">1:03</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: 'passages/Mysql/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
